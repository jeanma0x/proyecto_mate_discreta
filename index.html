<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Proyecto Matem√°tica Discreta - Maqueta Digital Interactiva</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<header>
  <div>
    <h1>Proyecto Matem√°tica Discreta ‚Äì Maqueta Digital Interactiva</h1>
    <span>Red de transporte ‚Ä¢ Red el√©ctrica / agua ‚Ä¢ Sistema de sem√°foros</span>
  </div>
  <span>Grafos + Dijkstra + MST</span>
</header>

<div class="container">
  <div class="nav-tabs" role="tablist" aria-label="Secciones del proyecto">
    <button
      id="tab-teoria"
      class="tab-btn active"
      role="tab"
      aria-selected="true"
      aria-controls="teoria"
      tabindex="0"
      data-target="teoria"
    >1. Teor√≠a y funcionamiento</button>
    <button
      id="tab-transporte"
      class="tab-btn"
      role="tab"
      aria-selected="false"
      aria-controls="transporte"
      tabindex="-1"
      data-target="transporte"
    >2. Red de transporte</button>
    <button
      id="tab-electrica"
      class="tab-btn"
      role="tab"
      aria-selected="false"
      aria-controls="electrica"
      tabindex="-1"
      data-target="electrica"
    >3. Red el√©ctrica / agua</button>
    <button
      id="tab-semaforos"
      class="tab-btn"
      role="tab"
      aria-selected="false"
      aria-controls="semaforos"
      tabindex="-1"
      data-target="semaforos"
    >4. Sistema de sem√°foros</button>
  </div>

  <!-- TEOR√çA -->
  <section id="teoria" class="view active" role="tabpanel" aria-labelledby="tab-teoria">
    <div class="theory-hero">
      <div class="hero-copy">
        <span class="badge"><span class="badge-dot"></span> Qu√© hace cada parte de la maqueta</span>
        <h2>Esta maqueta digital combina ciencia, ingenier√≠a y matem√°tica para contar historias con grafos.</h2>
        <p>
          Modelamos una <strong>red de transporte</strong>, una <strong>red de distribuci√≥n</strong> y un
          <strong>sistema de sem√°foros</strong>. Al modificar sus pesos y conexiones puedes ver c√≥mo un cambio local
          impacta al sistema completo.
        </p>
        <div class="hero-points">
          <div class="hero-chip">
            <span>‚öôÔ∏è</span>
            <div>
              <p>Simulaci√≥n editable</p>
              <small>Modifica distancias, costos y tiempos.</small>
            </div>
          </div>
          <div class="hero-chip">
            <span>üß†</span>
            <div>
              <p>Algoritmos cl√°sicos</p>
              <small>Dijkstra, Prim y l√≥gica de ciclos.</small>
            </div>
          </div>
          <div class="hero-chip">
            <span>üåê</span>
            <div>
              <p>Sistemas conectados</p>
              <small>Transporte ‚Üî Energ√≠a ‚Üî Tr√°fico.</small>
            </div>
          </div>
        </div>
      </div>
      <div class="hero-visual" aria-hidden="true">
        <div class="graph-glow"></div>
        <svg class="graph-orbit" viewBox="0 0 320 320">
          <circle class="orbit" cx="160" cy="160" r="110" />
          <circle class="orbit" cx="160" cy="160" r="70" />
          <line class="orbit-line" x1="160" y1="160" x2="60" y2="90" />
          <line class="orbit-line" x1="160" y1="160" x2="260" y2="90" />
          <line class="orbit-line" x1="160" y1="160" x2="160" y2="270" />
          <circle class="orbit-node center" cx="160" cy="160" r="22"></circle>
          <text class="node-icon" x="160" y="165">Œ£</text>
          <circle class="orbit-node transport" cx="60" cy="90" r="20"></circle>
          <text class="node-icon" x="60" y="95">üöç</text>
          <circle class="orbit-node energia" cx="260" cy="90" r="20"></circle>
          <text class="node-icon" x="260" y="95">üíß‚ö°</text>
          <circle class="orbit-node semaforos" cx="160" cy="270" r="20"></circle>
          <text class="node-icon" x="160" y="275">üö¶</text>
        </svg>
        <div class="graph-caption">Los tres modelos comparten un mismo lenguaje: grafos ponderados.</div>
      </div>
    </div>

    <div class="concept-grid" role="list">
      <div class="concept-card" role="listitem" tabindex="0">
        <div class="concept-icon">üß≠</div>
        <p class="concept-title">Nodos</p>
        <p class="concept-def">Representan terminales, subestaciones o cruces. Son los v√©rtices del grafo.</p>
      </div>
      <div class="concept-card" role="listitem" tabindex="0">
        <div class="concept-icon">üï∏Ô∏è</div>
        <p class="concept-title">Aristas</p>
        <p class="concept-def">Conectan nodos mediante carreteras, tuber√≠as o calles. Definen c√≥mo fluye la informaci√≥n.</p>
      </div>
      <div class="concept-card" role="listitem" tabindex="0">
        <div class="concept-icon">üéØ</div>
        <p class="concept-title">Pesos</p>
        <p class="concept-def">Distancia, costo o tiempo. Cambiar un peso altera rutas √≥ptimas, MST y fases de sem√°foros.</p>
      </div>
      <div class="concept-card" role="listitem" tabindex="0">
        <div class="concept-icon">üîÄ</div>
        <p class="concept-title">Escenarios</p>
        <p class="concept-def">Prueba fallos, rutas alternativas y nuevas tarifas para comprender la resiliencia del sistema.</p>
      </div>
    </div>

    <div class="systems-panel">
      <div class="systems-diagram-text">
        <h3>¬øC√≥mo se conectan los modelos?</h3>
        <p>
          Cada m√≥dulo usa un algoritmo distinto, pero comparten nodos clave. Si el transporte falla en un distrito,
          el consumo el√©ctrico cambia y la sincronizaci√≥n de sem√°foros debe adaptarse. Este panel te ayuda a visualizar
          esa conversaci√≥n entre redes.
        </p>
        <ul class="diagram-points">
          <li><span>1</span> Dijkstra determina rutas preferidas y cargas en avenidas principales.</li>
          <li><span>2</span> Prim optimiza el tendido para alimentar estaciones y bombas de agua.</li>
          <li><span>3</span> Los sem√°foros ajustan fases para mantener estable el flujo vehicular.</li>
        </ul>
      </div>
      <div class="systems-cards">
        <article class="system-card transport">
          <header>
            <span>üöç</span>
            <div>
              <p>Red de transporte</p>
              <small>Dijkstra + animaci√≥n del bus</small>
            </div>
          </header>
          <p>Explora la ruta m√°s corta entre barrios. Destaca los nodos visitados y muestra la tabla de distancias.</p>
        </article>
        <article class="system-card energia">
          <header>
            <span>üíß‚ö°</span>
            <div>
              <p>Red el√©ctrica / agua</p>
              <small>√Årbol de expansi√≥n m√≠nima</small>
            </div>
          </header>
          <p>Ajusta costos y descubre qu√© aristas conectan toda la ciudad con el menor gasto posible.</p>
        </article>
        <article class="system-card semaforos">
          <header>
            <span>üö¶</span>
            <div>
              <p>Sistema de sem√°foros</p>
              <small>Ciclos y fallos controlados</small>
            </div>
          </header>
          <p>Manipula los tiempos de verde/amarillo y simula fallos para entender la capacidad de cada direcci√≥n.</p>
        </article>
      </div>
    </div>

    <!-- Bloque extra de teor√≠a para reporte / exposici√≥n -->
    <div class="algo-extra">
      <h3>Algoritmos usados</h3>
      <p>
        A continuaci√≥n se muestran explicaciones paso a paso de los algoritmos
        aplicados directamente a los grafos que aparecen en la maqueta. Puedes
        usar estos textos para tu informe escrito o para explicar en la exposici√≥n.
      </p>

      <details>
        <summary>üß≠ Dijkstra en la red de transporte (grafo A‚ÄìF)</summary>
        <ul>
          <li>1. Elegimos un nodo origen, por ejemplo <strong>A</strong> (Terminal).</li>
          <li>2. Inicializamos las distancias: dist(A)=0 y dist(resto)=‚àû.</li>
          <li>3. Marcamos todos los nodos como ‚Äúno visitados‚Äù.</li>
          <li>4. Escogemos el nodo no visitado con menor distancia actual. Al inicio es A.</li>
          <li>5. Desde A, miramos sus vecinos (por ejemplo B y C) y actualizamos:
            <ul>
              <li>dist(B) = min(‚àû, dist(A)+w(A,B))</li>
              <li>dist(C) = min(‚àû, dist(A)+w(A,C))</li>
            </ul>
          </li>
          <li>6. Marcamos A como visitado. Ya no se vuelve a considerar.</li>
          <li>7. Repetimos: tomamos ahora el nodo no visitado con menor distancia (podr√≠a ser C),
            relajamos a sus vecinos, y as√≠ sucesivamente.</li>
          <li>8. El proceso termina cuando:
            <ul>
              <li>Visitamos todos los nodos, o</li>
              <li>Llegamos al destino que nos interesa (por ejemplo F).</li>
            </ul>
          </li>
          <li>9. El camino m√°s corto se reconstruye yendo hacia atr√°s con los ‚Äúpredecesores‚Äù:
            desde F vemos de qu√© nodo vino la mejor distancia, luego del anterior, etc.,
            hasta regresar a A.</li>
          <li>10. En la maqueta:
            <ul>
              <li>Los valores que introduces en la tabla son los <strong>pesos</strong> de las aristas.</li>
              <li>Cuando das clic en ‚ÄúCalcular ruta m√°s corta‚Äù, el c√≥digo ejecuta Dijkstra con esos pesos.</li>
              <li>El resultado se resalta sobre el mapa y el bus recorre exactamente ese camino √≥ptimo.</li>
            </ul>
          </li>
        </ul>
      </details>

      <details>
        <summary>üåê Prim en la red el√©ctrica / agua (grafo P‚ÄìU)</summary>
        <ul>
          <li>1. Partimos de un nodo inicial cualquiera, por ejemplo <strong>P</strong> (Planta).</li>
          <li>2. El ‚Äú√°rbol‚Äù inicial contiene solo a P y ninguna arista.</li>
          <li>3. Buscamos, entre todas las aristas que salen desde el √°rbol actual (al inicio solo desde P),
              la de <strong>menor costo</strong> que conecte un nodo nuevo.
          </li>
          <li>4. Agregamos esa arista al √°rbol y tambi√©n el nuevo nodo conectado.</li>
          <li>5. Repetimos el proceso:
            <ul>
              <li>Desde los nodos ya conectados (por ejemplo P, Q y R), revisamos todas las aristas
                  que salen hacia nodos que todav√≠a no est√©n en el √°rbol.</li>
              <li>Elegimos siempre la de costo m√°s bajo.</li>
            </ul>
          </li>
          <li>6. Termina cuando todos los nodos (P, Q, R, S, T, U) est√°n conectados al √°rbol.</li>
          <li>7. El resultado es un <strong>√Årbol de Expansi√≥n M√≠nima (MST)</strong>:
            conecta todos los puntos sin ciclos y con el costo total m√≠nimo posible para esa configuraci√≥n de costos.
          </li>
          <li>8. En la maqueta:
            <ul>
              <li>Los valores de la tabla representan costo de instalaci√≥n de cable/tuber√≠a.</li>
              <li>Cuando haces clic en ‚ÄúCalcular y resaltar MST‚Äù, el algoritmo de Prim calcula qu√© aristas conviene usar.</li>
              <li>Las aristas elegidas se marcan en verde y se muestra el costo total m√≠nimo.</li>
            </ul>
          </li>
        </ul>
      </details>

      <details>
        <summary>üö¶ Sem√°foros como grafo de flujo</summary>
        <ul>
          <li>1. Cada <strong>calle</strong> alrededor del cruce se puede ver como una arista en un grafo.</li>
          <li>2. Las <strong>entradas</strong> y <strong>salidas</strong> (Norte, Sur, Este, Oeste) son v√©rtices.</li>
          <li>3. Cuando un sem√°foro est√° en verde:
            <ul>
              <li>Las aristas que representan ese sentido de circulaci√≥n est√°n <strong>activas</strong>.</li>
              <li>El flujo de carros puede avanzar (la capacidad es distinta de 0).</li>
            </ul>
          </li>
          <li>4. Cuando un sem√°foro est√° en rojo:
            <ul>
              <li>En el modelo por grafos, esas aristas se pueden ver como ‚Äúbloqueadas‚Äù.</li>
              <li>Equivale a eliminar temporalmente esas aristas del grafo.</li>
            </ul>
          </li>
          <li>5. Si se simula un <strong>fallo</strong> (por ejemplo, los sem√°foros N‚ÄìS se apagan),
              en el grafo eso se ve como si se desactivaran todas las aristas
              que conectan Norte y Sur con el resto.
          </li>
          <li>6. Esto afecta directamente los caminos disponibles: algunos trayectos que antes exist√≠an
              ahora quedan imposibles porque falta al menos una arista.
          </li>
          <li>7. En la maqueta:
            <ul>
              <li>Los sliders cambian la duraci√≥n de las fases verde y amarilla.</li>
              <li>El ciclo que ves corresponde a alternar qu√© aristas del grafo est√°n activas en cada momento.</li>
              <li>El bot√≥n de ‚Äúfallo‚Äù simula desactivar por completo las aristas N‚ÄìS.</li>
            </ul>
          </li>
        </ul>
      </details>
    </div>
  </section>

  <!-- RED DE TRANSPORTE -->
  <section id="transporte" class="view" role="tabpanel" aria-labelledby="tab-transporte" hidden>
    <span class="badge"><span class="badge-dot"></span> Grafo de ciudad editable + Dijkstra + bus animado</span>
    <h2>Red f√≠sica de transporte (puedes cambiar distancias y rutas)</h2>
    <p>
      Esta secci√≥n simula una peque√±a ciudad. Puedes <strong>modificar las distancias</strong> de las carreteras
      y recalcular la ruta m√°s corta entre dos puntos con Dijkstra. El bus recorre visualmente el camino √≥ptimo.
    </p>

    <div class="flex">
      <div class="panel">
        <h3>Mapa de la ciudad</h3>
        <div class="graph-wrapper">
          <div class="map-background"></div>
          <div class="map-district map-d1"></div>
          <div class="map-district map-d2"></div>
          <div class="map-district map-d3"></div>
          <div class="map-district map-d4"></div>

          <svg id="transport-graph" viewBox="0 0 520 320">
            <defs>
              <linearGradient id="edge-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#22d3ee">
                  <animate attributeName="stop-color" values="#22d3ee;#4ade80;#22d3ee" dur="6s" repeatCount="indefinite" />
                </stop>
                <stop offset="100%" stop-color="#4ade80">
                  <animate attributeName="stop-color" values="#4ade80;#22d3ee;#4ade80" dur="6s" repeatCount="indefinite" />
                </stop>
              </linearGradient>
              <filter id="node-glow" x="-40%" y="-40%" width="180%" height="180%">
                <feGaussianBlur stdDeviation="4" result="blur" />
                <feMerge>
                  <feMergeNode in="blur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
            </defs>
            <!-- Carreteras gruesas tipo mapa -->
            <line class="road-edge" x1="80" y1="70" x2="250" y2="60" />
            <line class="road-edge" x1="80" y1="70" x2="140" y2="170" />
            <line class="road-edge" x1="250" y1="60" x2="140" y2="170" />
            <line class="road-edge" x1="250" y1="60" x2="350" y2="150" />
            <line class="road-edge" x1="140" y1="170" x2="350" y2="150" />
            <line class="road-edge" x1="140" y1="170" x2="200" y2="260" />
            <line class="road-edge" x1="350" y1="150" x2="200" y2="260" />
            <line class="road-edge" x1="350" y1="150" x2="430" y2="230" />
            <line class="road-edge" x1="200" y1="260" x2="430" y2="230" />

            <!-- L√≠neas de carril centrales -->
            <line class="road-lane" x1="80" y1="70" x2="250" y2="60" />
            <line class="road-lane" x1="80" y1="70" x2="140" y2="170" />
            <line class="road-lane" x1="250" y1="60" x2="140" y2="170" />
            <line class="road-lane" x1="250" y1="60" x2="350" y2="150" />
            <line class="road-lane" x1="140" y1="170" x2="350" y2="150" />
            <line class="road-lane" x1="140" y1="170" x2="200" y2="260" />
            <line class="road-lane" x1="350" y1="150" x2="200" y2="260" />
            <line class="road-lane" x1="350" y1="150" x2="430" y2="230" />
            <line class="road-lane" x1="200" y1="260" x2="430" y2="230" />

            <!-- Aristas para resaltado -->
            <line id="edge-A-B" class="edge neon-edge" x1="80" y1="70" x2="250" y2="60" />
            <line id="edge-A-C" class="edge neon-edge" x1="80" y1="70" x2="140" y2="170" />
            <line id="edge-B-C" class="edge neon-edge" x1="250" y1="60" x2="140" y2="170" />
            <line id="edge-B-D" class="edge neon-edge" x1="250" y1="60" x2="350" y2="150" />
            <line id="edge-C-D" class="edge neon-edge" x1="140" y1="170" x2="350" y2="150" />
            <line id="edge-C-E" class="edge neon-edge" x1="140" y1="170" x2="200" y2="260" />
            <line id="edge-D-E" class="edge neon-edge" x1="350" y1="150" x2="200" y2="260" />
            <line id="edge-D-F" class="edge neon-edge" x1="350" y1="150" x2="430" y2="230" />
            <line id="edge-E-F" class="edge neon-edge" x1="200" y1="260" x2="430" y2="230" />

            <!-- Pesos (distancias) -->
            <text id="label-A-B" class="weight-label" x="165" y="55">4 km</text>
            <text id="label-A-C" class="weight-label" x="100" y="120">2 km</text>
            <text id="label-B-C" class="weight-label" x="195" y="120">1 km</text>
            <text id="label-B-D" class="weight-label" x="310" y="90">5 km</text>
            <text id="label-C-D" class="weight-label" x="245" y="165">8 km</text>
            <text id="label-C-E" class="weight-label" x="160" y="230">10 km</text>
            <text id="label-D-E" class="weight-label" x="275" y="215">2 km</text>
            <text id="label-D-F" class="weight-label" x="390" y="185">6 km</text>
            <text id="label-E-F" class="weight-label" x="320" y="250">3 km</text>

            <!-- Nodos -->
            <g class="node-group">
              <circle id="node-A" class="node" cx="80" cy="70" r="15" />
              <text class="node-label" x="80" y="70">A</text>
              <text class="node-desc"  x="80" y="95">Terminal</text>
            </g>

            <g class="node-group">
              <circle id="node-B" class="node" cx="250" cy="60" r="15" />
              <text class="node-label" x="250" y="60">B</text>
              <text class="node-desc"  x="250" y="85">Centro</text>
            </g>

            <g class="node-group">
              <circle id="node-C" class="node" cx="140" cy="170" r="15" />
              <text class="node-label" x="140" y="170">C</text>
              <text class="node-desc"  x="140" y="195">Mercado</text>
            </g>

            <g class="node-group">
              <circle id="node-D" class="node" cx="350" cy="150" r="15" />
              <text class="node-label" x="350" y="150">D</text>
              <text class="node-desc"  x="350" y="175">Universidad</text>
            </g>

            <g class="node-group">
              <circle id="node-E" class="node" cx="200" cy="260" r="15" />
              <text class="node-label" x="200" y="260">E</text>
              <text class="node-desc"  x="200" y="285">Hospital</text>
            </g>

            <g class="node-group">
              <circle id="node-F" class="node" cx="430" cy="230" r="15" />
              <text class="node-label" x="430" y="230">F</text>
              <text class="node-desc"  x="430" y="255">Centro Comercial</text>
            </g>
          </svg>
          <div id="bus-icon" class="bus-icon">üöç</div>
        </div>
      </div>

      <div class="panel">
        <h3>Par√°metros de la red y simulaci√≥n</h3>
        <div class="controls">
          <div>
            <label>Distancias de las carreteras (km)</label>
            <table class="small-table">
              <thead>
              <tr><th>Arista</th><th>Peso</th></tr>
              </thead>
              <tbody>
              <tr><td>A ‚Äì B</td><td><input id="input-A-B" type="number" min="1" step="1" value="4"></td></tr>
              <tr><td>A ‚Äì C</td><td><input id="input-A-C" type="number" min="1" step="1" value="2"></td></tr>
              <tr><td>B ‚Äì C</td><td><input id="input-B-C" type="number" min="1" step="1" value="1"></td></tr>
              <tr><td>B ‚Äì D</td><td><input id="input-B-D" type="number" min="1" step="1" value="5"></td></tr>
              <tr><td>C ‚Äì D</td><td><input id="input-C-D" type="number" min="1" step="1" value="8"></td></tr>
              <tr><td>C ‚Äì E</td><td><input id="input-C-E" type="number" min="1" step="1" value="10"></td></tr>
              <tr><td>D ‚Äì E</td><td><input id="input-D-E" type="number" min="1" step="1" value="2"></td></tr>
              <tr><td>D ‚Äì F</td><td><input id="input-D-F" type="number" min="1" step="1" value="6"></td></tr>
              <tr><td>E ‚Äì F</td><td><input id="input-E-F" type="number" min="1" step="1" value="3"></td></tr>
              </tbody>
            </table>
          </div>

          <div>
            <label>Origen y destino</label>
            <select id="origen">
              <option value="A">A ‚Äì Terminal</option>
              <option value="B">B ‚Äì Centro</option>
              <option value="C">C ‚Äì Mercado</option>
              <option value="D">D ‚Äì Universidad</option>
              <option value="E">E ‚Äì Hospital</option>
              <option value="F">F ‚Äì Centro Comercial</option>
            </select>
            <select id="destino" style="margin-top:0.3rem;">
              <option value="A">A ‚Äì Terminal</option>
              <option value="B">B ‚Äì Centro</option>
              <option value="C">C ‚Äì Mercado</option>
              <option value="D">D ‚Äì Universidad</option>
              <option value="E">E ‚Äì Hospital</option>
              <option value="F" selected>F ‚Äì Centro Comercial</option>
            </select>
          </div>

          <button class="action-btn" id="btn-dijkstra">
            Calcular ruta m√°s corta
          </button>
          <button class="action-btn success" id="btn-anim-bus">
            Animar recorrido del bus
          </button>
          <button class="action-btn secondary" id="btn-reset-dijkstra">
            Limpiar resaltado / reiniciar bus
          </button>
          <button class="action-btn secondary" id="btn-random-weights">
            Randomizar distancias (escenario alterno)
          </button>

          <div class="result-box" id="resultado-dijkstra">
            1) Ajusta los km de las aristas si quieres.  
            2) Elige origen y destino.  
            3) Presiona ‚ÄúCalcular ruta m√°s corta‚Äù.
          </div>

          <div class="result-box table-output show" id="tabla-dijkstra">
            Aqu√≠ aparecer√°n los pasos de Dijkstra para la configuraci√≥n actual.
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- RED EL√âCTRICA / AGUA -->
  <section id="electrica" class="view" role="tabpanel" aria-labelledby="tab-electrica" hidden>
    <span class="badge"><span class="badge-dot"></span> Red de distribuci√≥n editable + MST</span>
    <h2>Maqueta de red el√©ctrica / de agua (puedes cambiar costos)</h2>
    <p>
      Aqu√≠ los pesos representan <strong>costos</strong> de instalaci√≥n de cables/tuber√≠as.
      Puedes editar cada costo y ver c√≥mo cambia el <strong>√°rbol de expansi√≥n m√≠nima</strong>
      (MST) obtenido con el algoritmo de Prim.
    </p>

    <div class="flex">
      <div class="panel">
        <h3>Red de distribuci√≥n ‚ö° / üíß</h3>
        <svg id="electric-graph" viewBox="0 0 500 320">
          <defs>
            <linearGradient id="pipe-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#38bdf8" />
              <stop offset="100%" stop-color="#34d399" />
            </linearGradient>
            <linearGradient id="panel-blue" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="rgba(59,130,246,0.15)" />
              <stop offset="100%" stop-color="rgba(34,197,94,0.1)" />
            </linearGradient>
            <pattern id="electric-grid" width="40" height="40" patternUnits="userSpaceOnUse">
              <path d="M40 0 L0 0 0 40" fill="none" stroke="rgba(148,163,184,0.15)" stroke-width="1" />
            </pattern>
            <pattern id="tech-pattern" width="12" height="12" patternUnits="userSpaceOnUse">
              <path d="M0 6 L6 0 L12 6 L6 12 Z" fill="none" stroke="rgba(148,163,184,0.08)" stroke-width="0.5" />
            </pattern>
          </defs>
          <g class="electric-bg">
            <rect width="500" height="320" fill="url(#electric-grid)" />
            <rect x="-30" y="30" width="220" height="120" fill="url(#panel-blue)" opacity="0.35" />
            <rect x="280" y="160" width="200" height="130" fill="url(#panel-blue)" opacity="0.25" />
            <rect width="500" height="320" fill="url(#tech-pattern)" />
          </g>
          <g class="electric-edges-base">
            <line class="pipe-edge" x1="70" y1="80" x2="230" y2="60" />
            <line class="pipe-edge" x1="70" y1="80" x2="140" y2="200" />
            <line class="pipe-edge" x1="230" y1="60" x2="140" y2="200" />
            <line class="pipe-edge" x1="230" y1="60" x2="360" y2="90" />
            <line class="pipe-edge" x1="140" y1="200" x2="260" y2="250" />
            <line class="pipe-edge" x1="360" y1="90" x2="260" y2="250" />
            <line class="pipe-edge" x1="360" y1="90" x2="430" y2="210" />
            <line class="pipe-edge" x1="260" y1="250" x2="430" y2="210" />
          </g>
          <g class="electric-edges-mst">
            <line id="edge-P-Q" class="pipe-inner" x1="70" y1="80" x2="230" y2="60" />
            <line id="edge-P-R" class="pipe-inner" x1="70" y1="80" x2="140" y2="200" />
            <line id="edge-Q-R" class="pipe-inner" x1="230" y1="60" x2="140" y2="200" />
            <line id="edge-Q-S" class="pipe-inner" x1="230" y1="60" x2="360" y2="90" />
            <line id="edge-R-T" class="pipe-inner" x1="140" y1="200" x2="260" y2="250" />
            <line id="edge-S-T" class="pipe-inner" x1="360" y1="90" x2="260" y2="250" />
            <line id="edge-S-U" class="pipe-inner" x1="360" y1="90" x2="430" y2="210" />
            <line id="edge-T-U" class="pipe-inner" x1="260" y1="250" x2="430" y2="210" />
          </g>
          <g class="electric-nodes">
            <circle class="node electric-node" id="electric-node-P" data-node="P" cx="70" cy="80" r="15" />
            <circle class="node electric-node" id="electric-node-Q" data-node="Q" cx="230" cy="60" r="15" />
            <circle class="node electric-node" id="electric-node-R" data-node="R" cx="140" cy="200" r="15" />
            <circle class="node electric-node" id="electric-node-S" data-node="S" cx="360" cy="90" r="15" />
            <circle class="node electric-node" id="electric-node-T" data-node="T" cx="260" cy="250" r="15" />
            <circle class="node electric-node" id="electric-node-U" data-node="U" cx="430" cy="210" r="15" />
          </g>
          <g class="electric-labels">
            <text id="cost-P-Q" class="weight-label" x="150" y="60">6</text>
            <text id="cost-P-R" class="weight-label" x="100" y="145">4</text>
            <text id="cost-Q-R" class="weight-label" x="185" y="140">5</text>
            <text id="cost-Q-S" class="weight-label" x="300" y="65">3</text>
            <text id="cost-R-T" class="weight-label" x="205" y="235">4</text>
            <text id="cost-S-T" class="weight-label" x="315" y="180">7</text>
            <text id="cost-S-U" class="weight-label" x="395" y="150">2</text>
            <text id="cost-T-U" class="weight-label" x="345" y="240">6</text>
            <text class="node-title" x="70" y="60">P ‚Äì Planta</text>
            <text class="node-title" x="230" y="40">Q ‚Äì Nodo Norte</text>
            <text class="node-title" x="140" y="180">R ‚Äì Subestaci√≥n</text>
            <text class="node-title" x="360" y="70">S ‚Äì Nodo Este</text>
            <text class="node-title" x="260" y="230">T ‚Äì Nodo Sur</text>
            <text class="node-title" x="430" y="190">U ‚Äì Cliente</text>
          </g>
        </svg>
      </div>

      <div class="panel">
        <h3>Par√°metros de costos y MST</h3>
        <div class="controls">
          <div>
            <label>Costos de cada conexi√≥n</label>
            <table class="small-table">
              <thead><tr><th>Arista</th><th>Costo</th></tr></thead>
              <tbody>
              <tr><td>P ‚Äì Q</td><td><input id="cost-input-P-Q" type="number" min="1" step="1" value="6"></td></tr>
              <tr><td>P ‚Äì R</td><td><input id="cost-input-P-R" type="number" min="1" step="1" value="4"></td></tr>
              <tr><td>Q ‚Äì R</td><td><input id="cost-input-Q-R" type="number" min="1" step="1" value="5"></td></tr>
              <tr><td>Q ‚Äì S</td><td><input id="cost-input-Q-S" type="number" min="1" step="1" value="3"></td></tr>
              <tr><td>R ‚Äì T</td><td><input id="cost-input-R-T" type="number" min="1" step="1" value="4"></td></tr>
              <tr><td>S ‚Äì T</td><td><input id="cost-input-S-T" type="number" min="1" step="1" value="7"></td></tr>
              <tr><td>S ‚Äì U</td><td><input id="cost-input-S-U" type="number" min="1" step="1" value="2"></td></tr>
              <tr><td>T ‚Äì U</td><td><input id="cost-input-T-U" type="number" min="1" step="1" value="6"></td></tr>
              </tbody>
            </table>
          </div>

          <button class="action-btn" id="btn-mst">
            Calcular y resaltar MST
          </button>
          <button class="action-btn secondary" id="btn-reset-mst">
            Limpiar resaltado
          </button>

          <div class="result-box" id="resultado-mst">
            Edita los costos si quieres probar otro escenario y luego presiona ‚ÄúCalcular y resaltar MST‚Äù.
          </div>
        </div>
        <div class="prim-steps-panel" id="prim-steps-panel">
          <div class="prim-steps-header">
            <h4>Proceso paso a paso del algoritmo de Prim</h4>
            <p>En cada iteraci√≥n agregamos un nodo nuevo y actualizamos el costo total del tendido.</p>
          </div>
          <table class="prim-steps-table">
            <thead>
              <tr>
                <th>Iteraci√≥n</th>
                <th>Nodo agregado</th>
                <th>Arista elegida</th>
                <th>Costo acumulado</th>
              </tr>
            </thead>
            <tbody id="prim-steps-body">
              <tr><td colspan="4">Calcula el MST para visualizar los pasos de Prim.</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- SISTEMA DE SEM√ÅFOROS -->
  <section id="semaforos" class="view" role="tabpanel" aria-labelledby="tab-semaforos" hidden>
    <span class="badge"><span class="badge-dot"></span> Sem√°foros con tiempos configurables y fallo</span>
    <h2>Sistema f√≠sico de sem√°foros (puedes ajustar los tiempos)</h2>
    <p>
      Esta intersecci√≥n controla el paso norte-sur y este-oeste. Puedes cambiar los segundos de verde y amarillo
      y observar el ciclo. Tambi√©n puedes simular un fallo en la direcci√≥n norte-sur.
    </p>

    <div class="flex">
      <div class="panel">
        <h3>Intersecci√≥n inteligente üö¶</h3>
        <div class="intersection">
          <div class="road horizontal">
            <div class="lane-line"></div>
            <div class="direction-glow" id="glow-ew"></div>
          </div>
          <div class="road vertical">
            <div class="lane-line-vert"></div>
            <div class="direction-glow" id="glow-ns"></div>
          </div>

          <div class="light-box north">
            <div id="north-red" class="light red"></div>
            <div id="north-yellow" class="light yellow"></div>
            <div id="north-green" class="light green"></div>
          </div>

          <div class="light-box south">
            <div id="south-red" class="light red"></div>
            <div id="south-yellow" class="light yellow"></div>
            <div id="south-green" class="light green"></div>
          </div>

          <div class="light-box west">
            <div id="west-red" class="light red"></div>
            <div id="west-yellow" class="light yellow"></div>
            <div id="west-green" class="light green"></div>
          </div>

          <div class="light-box east">
            <div id="east-red" class="light red"></div>
            <div id="east-yellow" class="light yellow"></div>
            <div id="east-green" class="light green"></div>
          </div>

          <div class="traffic-car car-n" id="car-n">üöó</div>
          <div class="traffic-car car-s" id="car-s">üöó</div>
          <div class="traffic-car car-w" id="car-w">üöó</div>
          <div class="traffic-car car-e" id="car-e">üöó</div>

          <div class="dir-label dir-n">N</div>
          <div class="dir-label dir-s">S</div>
          <div class="dir-label dir-w">O</div>
          <div class="dir-label dir-e">E</div>

          <div class="cycle-countdown" id="cycle-countdown">
            <svg viewBox="0 0 120 120">
              <circle class="countdown-bg" cx="60" cy="60" r="52" />
              <circle class="countdown-ring" id="countdown-ring" cx="60" cy="60" r="52" />
            </svg>
            <span id="countdown-text">0s</span>
          </div>
        </div>
      </div>

      <div class="panel">
        <h3>Tiempos de ciclo y simulaci√≥n</h3>
        <div class="controls">
          <div class="slider-control">
            <label>üü¢ Verde norte-sur (seg)</label>
            <input id="range-ns-green" class="neon-slider" type="range" min="2" max="10" value="4">
            <span class="slider-value" id="val-ns-green">4 s</span>
          </div>
          <div class="slider-control">
            <label>üü¢ Verde este-oeste (seg)</label>
            <input id="range-ew-green" class="neon-slider" type="range" min="2" max="10" value="4">
            <span class="slider-value" id="val-ew-green">4 s</span>
          </div>
          <div class="slider-control">
            <label>üü° Amarillo (aplica a ambos) (seg)</label>
            <input id="range-yellow" class="neon-slider" type="range" min="1" max="5" value="2">
            <span class="slider-value" id="val-yellow">2 s</span>
          </div>

          <div class="range-value" style="margin-top:0.3rem;">
            Ciclo total estimado: <span id="sem-cycle">12 s</span> ‚Äì
            N‚ÄìS verde: <span id="sem-ns-perc">33%</span>,
            E‚ÄìO verde: <span id="sem-ew-perc">33%</span>,
            Amarillo total: <span id="sem-y-perc">33%</span>.
          </div>

          <button class="action-btn" id="btn-start-sem">
            Iniciar ciclo con estos tiempos
          </button>
          <button class="action-btn secondary" id="btn-stop-sem">
            Detener ciclo (todo rojo)
          </button>
          <button class="action-btn danger" id="btn-fallo">
            Simular fallo en norte-sur
          </button>

          <div class="result-box" id="resultado-sem">
            Ajusta los tiempos, luego presiona ‚ÄúIniciar ciclo de sem√°foros‚Äù.
          </div>
          <div class="sem-phase-table">
            <h4>Fases del ciclo</h4>
            <table class="small-table" id="sem-steps-table">
              <thead>
              <tr>
                <th>#</th>
                <th>Fase</th>
                <th>Direcci√≥n con paso</th>
                <th>Duraci√≥n (s)</th>
                <th>Inicio (s)</th>
                <th>Fin (s)</th>
                <th>Estado N‚ÄìS</th>
                <th>Estado E‚ÄìO</th>
              </tr>
              </thead>
              <tbody>
              <tr><td colspan="8">Ajusta los par√°metros para ver las fases.</td></tr>
              </tbody>
            </table>
          </div>
          <p style="font-size:0.8rem; margin-top:0.5rem;">
            Desde grafos: cuando una direcci√≥n est√° en rojo (o falla), es como si se desactivaran
            temporalmente esas aristas, reduciendo los caminos disponibles entre los v√©rtices de la red vial.
          </p>
        </div>
      </div>
    </div>
  </section>
</div>

<script src="js/main.js"></script>
</body>
</html>
